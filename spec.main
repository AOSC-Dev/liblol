VER=0.0.5
REL=0~pre3
_mirror="http://pkg.loongnix.cn/loongnix"

### For pkgs from outside loongnix repo
# make-4.3:
#  File generation loop in stdio-common dir when installing target glibc 2.28 using latest make
#  ref: https://github.com/crosstool-ng/crosstool-ng/issues/1932#issuecomment-1528139734
#
# glibc-2.37:
#  ld.so.cache generated by ldconfig in glibc-2.38 or higher contains fp ABI in flags which is not supported by 2.37 or lower
#  also note that current glibc-2.37 in frontier repo also contians this feature which is backported from 2.38
#  so we cannot use ldconfig on the host system to generate ld.so.cache for the target system
#  ref: https://github.com/bminor/glibc/commit/f0d33cbd

SRCS="\
  file::rename=binutils-source.deb::${_mirror}/pool/main/b/binutils/binutils-source_2.31.1-22.lnd.vec.1_all.deb \
  file::rename=glibc-source.deb::${_mirror}/pool/main/g/glibc/glibc-source_2.28-10.lnd.35_all.deb \
  file::rename=gcc-8-source.deb::${_mirror}/pool/main/g/gcc-8/gcc-8-source_8.3.0-6.lnd.vec.36_all.deb \
  file::rename=linux-libc-dev.deb::${_mirror}/pool/main/l/linux/linux-libc-dev_4.19.190.8.14-lnd.3_loongarch64.deb \
  file::rename=libgcc-dev.deb::${_mirror}/pool/main/g/gcc-8/libgcc-8-dev_8.3.0-6.lnd.vec.36_loongarch64.deb \
  file::rename=make.tar.gz::https://ftp.gnu.org/gnu/make/make-4.3.tar.gz \
  file::rename=glibc-build.tar.gz::https://ftp.gnu.org/gnu/glibc/glibc-2.37.tar.gz \
"
CHKSUMS="\
  sha256::9892a45b4a01b29e4be30cf3f2c8dc5a721238da94fa576fefbfdf9cc41d061f \
  sha256::39a68820c60da7b0a747a0d54d32009fbf477363df2b6612006d0a7cc4808f75 \
  sha256::077d4b8a239872788e04ca9c02199b62dd029ee40248eb4b0db51cd408a5b043 \
  sha256::0c1412bb2b53733252564bd76eaac61525333926c902c22fca40cd737c55273e \
  sha256::f0a3092f10e4b37fc90293f85c518ceb02d72f4aae2f62d2f4d131ed6753a980 \
  sha256::e05fdde47c5f7ca45cb697e973894ff4f5d79e13b750ed57d7b66d8defc78e19 \
  sha256::811f19f9200118ff94ede28a6e12307584152cdcbf3d366cd729ea2f855db255 \
"

##FIXME: currently index of loongnix DaoXiangHu repo lacks of current version of src:gtk+3.0
# so we manually list the src pkg files here

SRCS="$SRCS \
  file::rename=gtk+3.0_3.24.5-1.1.dsc::${_mirror}/pool/main/g/gtk+3.0/gtk+3.0_3.24.5-1.1.dsc \
  file::rename=gtk+3.0_3.24.5.orig.tar.xz::${_mirror}/pool/main/g/gtk+3.0/gtk+3.0_3.24.5.orig.tar.xz \
  file::rename=gtk+3.0_3.24.5-1.1.debian.tar.xz::${_mirror}/pool/main/g/gtk+3.0/gtk+3.0_3.24.5-1.1.debian.tar.xz \
"

CHKSUMS="$CHKSUMS \
  sha256::5180786f8837a8e5bc91c68ddcc0c6060cd544e61ac69aa53788be038f2a1cb5 \
  sha256::0be5fb0d302bc3de26ab58c32990d895831e2b7c7418d0ffea1206d6a3ddb02f \
  sha256::bca95f557769b2bb0af244978da9cd64887e7fcf202a485fb6d572bf1ca524a6 \
"
